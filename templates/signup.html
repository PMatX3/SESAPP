<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Martel:wght@200;300;400;600;700;800;900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <!-- icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- Bootstrap css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://www.yourbestcandidate.ai/static/css/style.css">
    <link rel="shortcut icon" href="https://www.yourbestcandidate.ai/static/images/Yourbestcandidateai-white-logo.png">
    <title>Signup</title>
</head>

<body>

    <div class="container-fluid">
        <div class="row login-row">
            <!-- Image -->
            <div class="col-lg-6 p-0">
                <div class="login-left-box">
                    <div class="login-img">
                        <img src="https://www.yourbestcandidate.ai/static/images/login_img_two.jpg" class="img-fluid"
                            alt="Login Image">
                    </div>
                    <div class="login-content">
                        <div class="logo">
                            <img src="https://www.yourbestcandidate.ai/static/images/Yourbestcandidateai-white-logo.svg"
                                alt="">
                        </div>
                        <div class="login-title-text">
                            <h2> <span>Welcome to</span>
                                <p>Hire Smart AI Recruitment Software</p>
                            </h2>
                            <p class="title-sub-text">Please Enter the details to create your account.</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Form -->
            <div class="col-lg-6  p-0">
                <div class="login-form">
                    <div class="login-form-data-box">
                        <h2 class="login-form-title">Sign UP</h2>
                        <form id="signupForm">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="input-group mb-3">
                                        <div class="input-box">
                                            <input type="text" class="form-control" name="firstName" id="FirstName"
                                                placeholder="First Name" aria-describedby="inputGroup-sizing-default">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="input-group mb-3">
                                        <div class="input-box">
                                            <input type="text" class="form-control" name="lastName" id="LastName"
                                                placeholder="Last Name" aria-describedby="inputGroup-sizing-default">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-12">
                                    <div class="input-group mb-3">
                                        <div class="input-box">
                                            <input type="email" class="form-control" name="email" id="Email"
                                                placeholder="Email" aria-describedby="inputGroup-sizing-default">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="input-group mb-3">
                                        <div class="input-box">
                                            <input type="password" class="form-control" name="password" id="Password"
                                                placeholder="Password" oninput="validatePassword(this.value)"
                                                aria-describedby="inputGroup-sizing-default">
                                        </div>
                                        <ul id="passwordCriteria">
                                            <li id="lengthCriteria">Password must be at least 8 characters long.</li>
                                            <li id="uppercaseCriteria">Password must include at least one uppercase
                                                letter.</li>
                                            <li id="numberCriteria">Password must include at least one number.</li>
                                            <li id="specialCharCriteria">Password must include at least one special
                                                character.</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="input-group mb-3">
                                        <div class="input-box">
                                            <input type="text" class="form-control" name="company" id="company"
                                                placeholder="Company (optional)"
                                                aria-describedby="inputGroup-sizing-default">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="input-group mb-3">
                                        <input type="checkbox" id="terms" name="terms" value="terms" style="margin-right: 10px;">
                                        <label for="terms"> I agree to the <a href="/terms_and_conditions">Terms of Service</a></label>
                                        <p id="errorMessage_terms" class="text-danger" style="display: none;">Please agree to the Terms of Service.</p>
                                    </div>
                                </div>
                            </div>
                            <p id="errorMessage" class="text-danger text-center"></p>
                            <button type="submit" class="login-btn w-100">Sign Up</button>
                            <p class="chage-account">Already have an account? <a href="login">Login</a></p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.getElementById('terms').addEventListener('change', function () {
            document.getElementById('errorMessage_terms').style.display = 'none';
        });
        document.getElementById('signupForm').addEventListener('submit', function (event) {
            event.preventDefault();  // Prevent the default form submission
            console.log("terms ==> ", document.getElementById('terms').checked)
            if (!document.getElementById('terms').checked) {
                document.getElementById('errorMessage_terms').style.display = 'block';
                return;
            }

            // Check for blank space values in input fields
            const inputs = this.querySelectorAll('input[type="text"]:not(#company), input[type="password"], input[type="email"]');
            let allFieldsValid = true;
            console.log(allFieldsValid)
            for (let input of inputs) {
                if (input.value.trim() === '') {
                    console.log(input.value.trim())
                    allFieldsValid = false;
                    break;
                }
            }

            if (!allFieldsValid) {
                alert('Please fill in all fields. Fields cannot contain only spaces.');
                return;
            }

            var formData = new FormData(this);
            console.log(formData)
            fetch('/signup', {
                method: 'POST',
                body: formData
            })
                .then(response => {
                    if (response.ok) {
                        window.location.href = '/login';  // Redirect to the homepage on success
                    } else {
                        response.json().then(data => {
                            alert(data.message);  // Show error message from server
                        });
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred. Please try again.');
                });
        });
        function validatePassword(password) {
            const submitButton = document.querySelector('button[type="submit"]');
            let isValid = true;

            // Length criteria
            const lengthCriteria = document.getElementById('lengthCriteria');
            if (password.length < 8) {
                lengthCriteria.style.color = "red";
                isValid = false;
            } else {
                lengthCriteria.style.color = "green";
            }

            // Uppercase letter criteria
            const uppercaseCriteria = document.getElementById('uppercaseCriteria');
            if (!/[A-Z]/.test(password)) {
                uppercaseCriteria.style.color = "red";
                isValid = false;
            } else {
                uppercaseCriteria.style.color = "green";
            }

            // Number criteria
            const numberCriteria = document.getElementById('numberCriteria');
            if (!/[0-9]/.test(password)) {
                numberCriteria.style.color = "red";
                isValid = false;
            } else {
                numberCriteria.style.color = "green";
            }

            // Special character criteria
            const specialCharCriteria = document.getElementById('specialCharCriteria');
            if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
                specialCharCriteria.style.color = "red";
                isValid = false;
            } else {
                specialCharCriteria.style.color = "green";
            }

            submitButton.disabled = !isValid;
        }

        function validateEmail(email) {
            const emailError = document.getElementById('email_error');
            const submitButton = document.querySelector('button[type="submit"]');
            const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
            let isValid = emailRegex.test(email);

            if (!isValid) {
                emailError.textContent = "Please enter a valid email address.";
                emailError.style.color = "red";
            } else {
                emailError.textContent = "Email is valid!";
                emailError.style.color = "green";
            }

            submitButton.disabled = !isValid;
        }
    </script>
</body>

</html>